(()=>{"use strict";(()=>{let e={};chrome.runtime.onMessage.addListener(((o,n,r)=>{var i;if(n.tab&&(null===(i=n.tab.url)||void 0===i?void 0:i.includes("gemini.google.com"))){const r=n.tab.id;if("content_ready"===o.type&&r)return console.log(`タブID: ${r} の準備が完了しました。`),void(e[r]=!0);o.status&&(console.log("content.jsから応答を受信:",o),chrome.runtime.sendMessage(o))}else!n.tab&&o.command&&(console.log("ポップアップからメッセージを受信:",o),function(o){chrome.tabs.query({active:!0,currentWindow:!0},(n=>{var r;const i=n[0];i&&i.id&&(null===(r=i.url)||void 0===r?void 0:r.includes("gemini.google.com"))?e[i.id]?chrome.tabs.sendMessage(i.id,o):console.error(`タブID: ${i.id} はまだ準備ができていません。`):(console.error("アクティブなGeminiタブが見つかりません"),console.error("エラーを送信できません: MCPサーバーに接続されていません"))}))}(o));return!0}))})()})();
//# sourceMappingURL=background.js.map